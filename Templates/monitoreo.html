<!DOCTYPE html>

<html lang="en">

{% include "head.html" %}



<script src="/static/js/monitoreo.js"></script>
<script src="/static/js/chart.js"></script>
<script src="/static/js/angular-chart.js"></script>


<body ng-app="App" ng-controller="Controller">


<div class='vertical' style="position: absolute;">
  <div class='vertical'> {% include "vertical.html" %} </div>
 
</div>




<div class="container" >



{% include "header.html" %}

<script type="text/javascript">
  
jQuery(document).ready(function($) {
    var ws4redis = WS4Redis({
        uri: '{{ WEBSOCKET_URI }}foobar?subscribe-broadcast&publish-broadcast&echo',
        receive_message: receiveMessage,
        heartbeat_msg: {{ WS4REDIS_HEARTBEAT }}
    });





    function receiveMessage(msg) {
        console.log('Message from Websocket: ' + msg);
    }
});



</script>

<!--Cabecera-->
  <div class="panel panel-default" onmouseover="container()">
  <div class="panel-body">
    <div class='row'>
      <div class="col-sm-2"><h5><i class="fa fa-lightbulb-o"></i> Asignacion de Agentes</h5>
      </div>
      <div class="col-sm-2"><h5><i class="fa fa-cube"></i>  Campaña {[{campana}]} </h5>
      </div>
      <div class="col-sm-2"><h5><i class="fa fa-building-o"></i>  Cartera  {[{cartera}]} </h5>
      </div>

      <div class="col-sm-6">

      <ul class="legend">
          <li><span class="superawesome"></span> No Login</li>
          <li><span class="awesome"></span> Espera</li>
          <li><span class="kindaawesome"></span> En Llamada</li>
          <li><span class="notawesome"></span> Descolgado</li>
          <li><span class="enpause"></span> En Pause</li>
           <li><span class="engestion"></span> En Gestion</li>
          </ul>

      </div>


    </div>
    
   
  </div>
</div>





  <!--Agentes Cuadrados-->   

          <div class='row' onmouseover="container()">


          <table class="table table-hover">
              <thead>
                <tr>
                  <th>Id</th>
                  <th>Agente</th>
                  <th>Anexo</th>
                  <th>T. Gestion</th>
                  <th>Estado</th>
                  <th>Atendidas</th>

                  <th>Tiempo</th>
                  <th></th>
                  <th ng-if="contact.agente__wordstipeo > 1">Tipeo</th>
                  <th>Telefono</th>
                  <th>Notificacion</th>
                  <th>Evaluacion</th>
                  <th>Escucha</th>
                 
                 
                </tr>
              </thead>
              <tbody>
                <tr  ng-repeat="contact in agentes " class='active' ts-repeat>

                  
                  <td>{[{contact.agente}]}</td>
                  <td>{[{contact.agente__user__first_name}]}</td>
                  <td>{[{contact.agente__anexo}]}</td>
                  <td>Manual</td>
                  <td ng-if="contact.agente__estado == '1'" style="background-color:#8FB0B3;">{[{contact.agente__estado__nombre}]}</td>
                  <td ng-if="contact.agente__estado == '2'" style="background-color:#82BF72;">{[{contact.agente__estado__nombre}]}</td>
                  <td ng-if="contact.agente__estado == '3'" style="background-color:#478BCE;">{[{contact.agente__estado__nombre}]}</td>
                  <td ng-if="contact.agente__estado == '4'" style="background-color:#D2447A;">{[{contact.agente__estado__nombre}]}</td>
                  <td ng-if="contact.agente__estado == '5'" style="background-color:#D0CA40;">{[{contact.agente__estado__nombre}]}</td>
                  <td ng-if="contact.agente__estado == '6'" style="background-color:#A36AA5;">{[{contact.agente__estado__nombre}]}</td>
                  <td>{[{contact.agente__atendidas}]}/{[{contact.agente__contactadas}]}</td>
                 <td>{[{contact.tgestion}]}</td>
                  <td>
                    
                    <div class="progre">
                    <div class="progressi">
                    <div class="barr" style="width:{[{contact.secgestion}]}px; background-color: {[{contact.color}]};"></div>
                    </div>
                    </div>               
                  </td>

                   <td class="col-sm-6" ng-if="contact.agente__wordstipeo > 1">
                    <center><i class="fa fa-pencil"></i> {[{contact.agente__wordstipeo}]}</center>
                    </td>

                    <td> {[{contact.fono}]}</td>
                    

                    <td><a  ng-click="evaluar(contact,$index)" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#notificacion"><i class="fa fa-rocket"></i></a></td>
                    <td>
                    
                    <a ng-click="evaluar(contact,$index)" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#eliminar"><i class="fa fa-check"></i></a></td>

                    <td><a ng-if="contact.agente__estado == '3'"  ng-click="evaluar(contact,$index)" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#listen"><i class="fa fa-headphones"></i></a></td>

                    
            


                </tr>
              </tbody>
            </table>






            

<!--Graficas de Monitoreo-->

<button ng-click="mon()" class="btn btn-primary" ng-show='bb'>Ver Graficas <i class="fa fa-line-chart"></i></button>
<button ng-click="ocultarmon()" class="btn btn-primary" ng-show='bbi'>Ocultar Graficas <i class="fa fa-line-chart"></i></button>

  <div class="panel panel-default monixxx animated bounceIn " >


  <div class="panel-body">
    
      <div class ='row'>

    <div class="col-sm-3">

  <div id="pie" style="width:80%; height:200px;"></div>

    </div>

    <div class="col-sm-3">

  <div id="pie1" style="width:80%; height:200px;"></div>

    </div>

      <div class="col-sm-3">

  <div id="xy" style="width:100%; height:200px;"></div>

    </div>

       <div class="col-sm-3">

  <div id="ga" style="width:100%; height:200px;"></div>

    </div>


  </div>



  </div>


</div>



  </div>






   {% include "graficos.html" %} 
 


</div>




</div>



<!--inicio modales-->

<div id="eliminar" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Calificacion del agente {[{user.agente__user__first_name}]} </h4>

        <h5>Criterio {[{primer.id}]} </h5>
        <h5>{[{primer.nombre}]}</h5>

      </div>
        <div class="modal-body">

                  <div class='row'>

                     <div class="col-sm-6"><center><h5>Preguntas</h5></center>
                     </div>

                     <div class="col-sm-6"><center><h5>Calificación</h5></center>
                     </div>

                  

                  </div><br>




                  <div class='row'>
                    <ul ng-repeat=" pregunta in preguntas">
                    <div class="col-sm-12">
                        <div class='row'>
                            <div class="col-sm-6">  


                            
                             <p> {[{pregunta.pregunta}]}</p>


                            
                            </div>


                            

                            <div class="col-sm-6">
                            <center>

                            <button type="submit" ng-click="calificarsi(pregunta)" class="btn btn-primary">Si <i class="fa fa-check"></i></button>


                            <button type="submit" ng-click="calificarno(pregunta)" class="btn btn-primary">No <i class="fa fa-close"></i></button>
                            </center>

                            </div>




                               


                    </div>
                    <br>



                    </ul>

                  </div>  
                 
        </div>

         <div class="modal-footer">

             <button class="btn" data-dismiss="modal">Cerrar</button>
             <button class="btn"  ng-click='criterio(primer)' ng-show='btnpregunta'>Siguiente Criterio</button>
             <button class="btn btn-primary"  ng-click='calificacion()' ng-show='btncalifica' data-toggle="modal" data-target="#calificafin">Enviar Calificacion</button>
           
      </div>
    
   



    </div>

  </div>
</div>



<div id="notificacion" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Notificacion al agente {[{user.agente__user__first_name}]} </h4>
      </div>
        <div class="modal-body">

        <textarea class="form-control" rows="5" ng-model="notificacion"></textarea>

                 
        </div>

         <div class="modal-footer">
           <button class="btn" data-dismiss="modal">Cerrar</button>
           <button type="submit" ng-click="notificar(notificacion,user)" class="btn btn-primary">Enviar <i class="fa fa-rocket"></i></a></button>
      </div>
    
   



    </div>

  </div>
</div>


<div id="calificafin" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Calificacion al agente {[{user.agente__user__first_name}]} </h4>
      </div>
        <div class="modal-body">

        El agente acumulo un porcentaje de {[{puntaje}]}
                 
        </div>

         <div class="modal-footer">
           <button class="btn" data-dismiss="modal">Cerrar</button>
           <button type="submit" ng-click="calificar(data,user)" class="btn btn-primary">Enviar <i class="fa fa-rocket"></i></a></button>
      </div>
    
   



    </div>

  </div>
</div>



<!--Fin modales-->



</body>

</html>



